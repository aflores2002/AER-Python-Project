import pandas as pd
import numpy as np
import matplotlib as plt
import plotly.express as px

# Read the CSV file and skip the first 13 rows
filtered = pd.read_csv("Sam-DataLog-9-24.csv", skiprows=13, usecols=['Time', 'D1 DC Bus Voltage', 'D4 DC Bus Current'])

# Convert columns to numeric data types
filtered['D1 DC Bus Voltage'] = pd.to_numeric(filtered['D1 DC Bus Voltage'], errors='coerce')
filtered['D4 DC Bus Current'] = pd.to_numeric(filtered['D4 DC Bus Current'], errors='coerce')

# Calculate wattage
filtered['Wattage'] = filtered['D1 DC Bus Voltage'] * filtered['D4 DC Bus Current']

# Save the filtered data to a new CSV file
filtered.to_csv("filteredDataWithWatts.csv", index=False)

# Plot Time vs. Wattage
fig = px.line(filtered, x='Time', y='Wattage', title='Time vs. Wattage')
fig.show()

print(filtered)

# Voltage under 250 -> Car is OFF
